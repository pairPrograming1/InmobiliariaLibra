{"version":3,"sources":["../../../../../../proyectos/InmobiliariaLibra/components/property-form.tsx/__nextjs-internal-proxy.mjs","../../../../../../proyectos/InmobiliariaLibra/app/admin/propiedades/%5Bid%5D/editar/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const PropertyForm = registerClientReference(\n    function() { throw new Error(\"Attempted to call PropertyForm() from the server but PropertyForm is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/proyectos/InmobiliariaLibra/components/property-form.tsx\",\n    \"PropertyForm\",\n);\n","import { sql } from \"@/lib/db\"\r\nimport type { Property, PropertyWithDetails, Room, PropertyImage, Service } from \"@/lib/types\"\r\nimport { PropertyForm } from \"@/components/property-form\"\r\nimport { notFound } from \"next/navigation\"\r\n\r\nasync function getProperty(id: string): Promise<PropertyWithDetails | null> {\r\n  try {\r\n    if (!sql) {\r\n      console.log(\"Database not configured yet\")\r\n      return null\r\n    }\r\n\r\n    const propertyRows = (await sql<Property[]>`\r\n      SELECT * FROM properties WHERE id = ${id}\r\n    `) as unknown as Property[]\r\n    const property = propertyRows[0]\r\n\r\n    if (!property) {\r\n      return null\r\n    }\r\n\r\n    const roomsRows = (await sql<Room[]>`\r\n      SELECT * FROM rooms WHERE property_id = ${id}\r\n    `) as unknown as Room[]\r\n    const imagesRows = (await sql<PropertyImage[]>`\r\n      SELECT * FROM property_images WHERE property_id = ${id} ORDER BY display_order\r\n    `) as unknown as PropertyImage[]\r\n    const servicesRows = (await sql<Service[]>`\r\n      SELECT s.* FROM services s\r\n      JOIN property_services ps ON s.id = ps.service_id\r\n      WHERE ps.property_id = ${id}\r\n    `) as unknown as Service[]\r\n\r\n    const result: PropertyWithDetails = {\r\n      id: property.id,\r\n      title: property.title,\r\n      description: property.description,\r\n      square_meters: property.square_meters,\r\n      rental_price: property.rental_price,\r\n      expenses: property.expenses,\r\n      created_at: property.created_at,\r\n      updated_at: property.updated_at,\r\n      rooms: roomsRows,\r\n      images: imagesRows,\r\n      services: servicesRows,\r\n    }\r\n    return result\r\n  } catch (error) {\r\n    console.error(\"[v0] Error fetching property:\", error)\r\n    return null\r\n  }\r\n}\r\n\r\nexport default async function EditPropertyPage({\r\n  params,\r\n}: {\r\n  params: Promise<{ id: string }>\r\n}) {\r\n  const { id } = await params\r\n  const property = await getProperty(id)\r\n\r\n  if (!property) {\r\n    notFound()\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <div className=\"container mx-auto px-4 py-8\">\r\n        <h1 className=\"text-3xl md:text-4xl font-bold text-foreground mb-8\">\r\n          Editar Propiedad\r\n        </h1>\r\n        <PropertyForm property={property} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"uZAEO,IAAM,EAAe,CAAA,EAAA,AAD5B,EAAA,CAAA,CAAA,OAC4B,uBAAA,AAAuB,EAC/C,WAAa,MAAM,AAAI,MAAM,sOAAwO,EACrQ,yFACA,iEAHG,IAAM,EAAe,CAAA,EAD5B,AAC4B,EAD5B,CAAA,CAAA,OAC4B,uBAAuB,AAAvB,EACxB,WAAa,MAAM,AAAI,MAAM,sOAAwO,EACrQ,qEACA,oJCLJ,EAAA,EAAA,CAAA,CAAA,OAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,OAAA,IAAA,EAAA,EAAA,CAAA,CAAA,gBAEA,eAAe,EAAY,CAAU,EACnC,GAAI,CACF,GAAI,CAAC,EAAA,GAAG,CAEN,CAFQ,MACR,QAAQ,GAAG,CAAC,+BACL,KAMT,IAAM,EAAW,CAHK,MAAM,EAAA,GAAe,CAAC;0CACN,EAAE,EAAG;IAC3C,CAAC,CAC4B,CAAC,EAAE,CAEhC,GAAI,CAAC,EACH,OAAO,CADM,IAIf,IAAM,EAAa,MAAM,EAAA,GAAW,CAAC;8CACK,EAAE,EAAG;IAC/C,CAAC,CACK,EAAc,MAAM,EAAA,GAAoB,CAAC;wDACK,EAAE,EAAG;IACzD,CAAC,CACK,EAAgB,MAAM,EAAA,GAAc,CAAC;;;6BAGlB,EAAE,EAAG;IAC9B,CAAC,CAeD,MAboC,CAClC,AAYK,GAZD,EAAS,EAAE,CACf,MAAO,EAAS,KAAK,CACrB,YAAa,EAAS,WAAW,CACjC,cAAe,EAAS,aAAa,CACrC,aAAc,EAAS,YAAY,CACnC,SAAU,EAAS,QAAQ,CAC3B,WAAY,EAAS,UAAU,CAC/B,WAAY,EAAS,UAAU,CAC/B,MAAO,EACP,OAAQ,EACR,SAAU,CACZ,CAEF,CAAE,MAAO,EAAO,CAEd,OADA,QAAQ,KAAK,CAAC,gCAAiC,GACxC,IACT,CACF,CAEe,eAAe,EAAiB,CAC7C,QAAM,CAGP,EACC,GAAM,IAAE,CAAE,CAAE,CAAG,MAAM,EACf,EAAW,MAAM,EAAY,GAMnC,OAJI,AAAC,GACH,CAAA,EAAA,EAAA,EADa,MACb,AAAQ,IAIR,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+DAAsD,qBAGpE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,SAAU,QAIhC","ignoreList":[0]}